# CodeNothing

CodeNothingæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ï¼Œç°åœ¨é…å¤‡äº†**JITï¼ˆJust-In-Timeï¼‰ç¼–è¯‘å™¨**ï¼

## ğŸš€ v0.6.4 é‡å¤§æ›´æ–° - JITç¼–è¯‘å™¨

### âš¡ JITç®—æœ¯è¡¨è¾¾å¼ç¼–è¯‘
- **çƒ­ç‚¹æ£€æµ‹**: è‡ªåŠ¨è¯†åˆ«é¢‘ç¹æ‰§è¡Œçš„ç®—æœ¯è¡¨è¾¾å¼ï¼ˆ100æ¬¡é˜ˆå€¼ï¼‰
- **å³æ—¶ç¼–è¯‘**: ä½¿ç”¨Craneliftå°†çƒ­ç‚¹ä»£ç ç¼–è¯‘ä¸ºæœ¬åœ°æœºå™¨ç 
- **æ™ºèƒ½ç¼“å­˜**: ç¼–è¯‘ç»“æœç¼“å­˜ï¼Œé¿å…é‡å¤ç¼–è¯‘
- **æ€§èƒ½é£è·ƒ**: ç®—æœ¯å¯†é›†å‹ç¨‹åºå¯è·å¾—æ•°å€åŠ é€Ÿ

### ğŸ”§ JITè°ƒè¯•ç³»ç»Ÿ
```bash
./CodeNothing program.cn                    # æ­£å¸¸è¿è¡Œ
./CodeNothing program.cn --cn-jit-debug     # JITè°ƒè¯•æ¨¡å¼
./CodeNothing program.cn --cn-jit-stats     # JITæ€§èƒ½ç»Ÿè®¡
./CodeNothing program.cn --cn-jit-debug --cn-jit-stats  # å®Œæ•´æ¨¡å¼
```

### ğŸ“Š JITæ€§èƒ½ç›‘æ§
- **å®æ—¶ç»Ÿè®¡**: çƒ­ç‚¹æ£€æµ‹ã€ç¼–è¯‘æˆåŠŸç‡ã€æ‰§è¡Œæ•ˆç‡
- **è¯¦ç»†æŠ¥å‘Š**: æ ¼å¼åŒ–çš„æ€§èƒ½åˆ†ææŠ¥å‘Š
- **å¼€å‘å‹å¥½**: ä¸å¹²æ‰°æ­£å¸¸ç”¨æˆ·ä½“éªŒçš„è°ƒè¯•ç³»ç»Ÿ

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### åŸºç¡€è¯­è¨€ç‰¹æ€§
- å˜é‡å£°æ˜å’Œèµ‹å€¼
- åŸºæœ¬çš„ç®—æœ¯è¿ç®—
- å‡½æ•°å®šä¹‰å’Œè°ƒç”¨
- å‘½åç©ºé—´
- è‡ªå¢ã€è‡ªå‡å’Œå¤åˆèµ‹å€¼æ“ä½œç¬¦
- if-else æ¡ä»¶è¯­å¥å’Œé€»è¾‘æ“ä½œç¬¦
- forå¾ªç¯å’Œwhileå¾ªç¯
- å•è¡Œå’Œå¤šè¡Œæ³¨é‡Š
- åŠ¨æ€åº“åŠ è½½å’Œè°ƒç”¨

## è¯­æ³•ç¤ºä¾‹

### å˜é‡å£°æ˜å’Œèµ‹å€¼

```
num : int = 10;
str : string = "hello";
```

### å‡½æ•°å®šä¹‰å’Œè°ƒç”¨

```
fn add(a : int, b : int) : int {
    return a + b;
};

result : int = add(1, 2);
```

### ğŸš€ JITç¼–è¯‘ç¤ºä¾‹ï¼ˆv0.6.4æ–°åŠŸèƒ½ï¼‰

```codenothing
using lib <io>;
using ns std;

fn main() : int {
    // JITç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¼˜åŒ–è¿™ä¸ªå¾ªç¯ä¸­çš„ç®—æœ¯è¡¨è¾¾å¼
    i : int = 0;
    sum : int = 0;

    while (i < 150) {  // è¶…è¿‡JITé˜ˆå€¼(100æ¬¡)
        temp : int = i * 2 + 1;  // ğŸš€ è¿™ä¸ªè¡¨è¾¾å¼ä¼šè¢«JITç¼–è¯‘
        sum = sum + temp;        // ğŸš€ è¿™ä¸ªè¡¨è¾¾å¼ä¹Ÿä¼šè¢«JITç¼–è¯‘
        i = i + 1;
    };

    std::println("è®¡ç®—ç»“æœ: " + sum);
    return 0;
}
```

**è¿è¡ŒJITä¼˜åŒ–ç¨‹åº**:
```bash
# æ­£å¸¸è¿è¡Œï¼ˆè‡ªåŠ¨JITä¼˜åŒ–ï¼‰
./CodeNothing jit_example.cn

# æŸ¥çœ‹JITç¼–è¯‘æ´»åŠ¨
./CodeNothing jit_example.cn --cn-jit-debug

# æ˜¾ç¤ºæ€§èƒ½ç»Ÿè®¡æŠ¥å‘Š
./CodeNothing jit_example.cn --cn-jit-stats
```

### å‘½åç©ºé—´

```
ns math {
    fn add(a : int, b : int) : int {
        return a + b;
    };
};

result : int = math::add(1, 2);

// å¯¼å…¥å‘½åç©ºé—´
using ns math;
result : int = add(1, 2);
```

### è‡ªå¢ã€è‡ªå‡å’Œå¤åˆèµ‹å€¼æ“ä½œç¬¦

```
num : int = 10;
num++;       // åç½®è‡ªå¢
num--;       // åç½®è‡ªå‡
++num;       // å‰ç½®è‡ªå¢
--num;       // å‰ç½®è‡ªå‡
num += 5;    // å¤åˆèµ‹å€¼
num -= 3;    // å¤åˆèµ‹å€¼
num *= 2;    // å¤åˆèµ‹å€¼
num /= 4;    // å¤åˆèµ‹å€¼
num %= 3;    // å¤åˆèµ‹å€¼

// åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨è‡ªå¢/è‡ªå‡
a : int = 5;
b : int = 5;
x : int = ++a;  // å‰ç½®è‡ªå¢ï¼šå…ˆå¢åŠ açš„å€¼ï¼Œå†è¿”å›æ–°å€¼ï¼Œxä¸º6ï¼Œaä¸º6
y : int = b++;  // åç½®è‡ªå¢ï¼šå…ˆè¿”å›bçš„åŸå€¼ï¼Œå†å¢åŠ bçš„å€¼ï¼Œyä¸º5ï¼Œbä¸º6
```

### if-else æ¡ä»¶è¯­å¥å’Œé€»è¾‘æ“ä½œç¬¦

```
if (condition) {
    // ä»£ç å—
} else if (another_condition) {
    // ä»£ç å—
} else {
    // ä»£ç å—
};

// é€»è¾‘æ“ä½œç¬¦
if (a > 5 && b < 10) {
    // é€»è¾‘ä¸
};

if (a > 5 || b < 10) {
    // é€»è¾‘æˆ–
};

if (!condition) {
    // é€»è¾‘é
};
```

### forå¾ªç¯

```
// éå†èŒƒå›´ä»1åˆ°5çš„æ•´æ•°
for (i : 1..5) {
    // ä»£ç å—ï¼Œiçš„å€¼ä¾æ¬¡ä¸º1, 2, 3, 4, 5
    
    if (i == 3) {
        break;    // è·³å‡ºå¾ªç¯
    };
    
    if (i % 2 == 0) {
        continue; // è·³è¿‡å½“å‰è¿­ä»£ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡è¿­ä»£
    };
};
```

### whileå¾ªç¯

```
// å½“æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œé‡å¤æ‰§è¡Œä»£ç å—
while (condition) {
    // ä»£ç å—
    
    if (someCondition) {
        break;    // è·³å‡ºå¾ªç¯
    };
    
    if (anotherCondition) {
        continue; // è·³è¿‡å½“å‰è¿­ä»£ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡è¿­ä»£
    };
};
```

### æ³¨é‡Š

```
// è¿™æ˜¯å•è¡Œæ³¨é‡Š

/!
    è¿™æ˜¯å¤šè¡Œæ³¨é‡Š
    å¯ä»¥è·¨è¶Šå¤šè¡Œ
!/

/! è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¤šè¡Œæ³¨é‡Šï¼Œè™½ç„¶åªæœ‰ä¸€è¡Œ !/

// åµŒå¥—å¤šè¡Œæ³¨é‡Š
/!
    å¤–å±‚æ³¨é‡Š
    /!
        å†…å±‚æ³¨é‡Š - è¿™éƒ¨åˆ†ä¼šè¢«å®Œå…¨å¿½ç•¥
    !/
    ç»§ç»­å¤–å±‚æ³¨é‡Š
!/
```

### åŠ¨æ€åº“åŠ è½½å’Œè°ƒç”¨

```
// å¯¼å…¥åŠ¨æ€åº“
using lib_once <io>;

// è°ƒç”¨åº“å‡½æ•°
std::println("Hello, world!");

// è¯»å–ç”¨æˆ·è¾“å…¥
input : string = std::read_line();
```

## è¿è¡Œï¼ˆä»æºä»£ç ç¼–è¯‘åï¼‰

```
cargo run -- <æ–‡ä»¶è·¯å¾„>
```

ä¾‹å¦‚ï¼š

```
cargo run -- helloworld.cn
```

## åŠ¨æ€åº“å¼€å‘

CodeNothing æ”¯æŒé€šè¿‡åŠ¨æ€åº“æ‰©å±•åŠŸèƒ½ã€‚åŠ¨æ€åº“å¿…é¡»éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š

1. å¿…é¡»å¯¼å‡ºä¸€ä¸ªåä¸º `cn_init` çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªåŒ…å«åº“å‡½æ•°çš„ HashMap æŒ‡é’ˆã€‚
2. åº“å‡½æ•°å¿…é¡»æ¥å— `Vec<String>` ç±»å‹çš„å‚æ•°ï¼Œå¹¶è¿”å› `String` ç±»å‹çš„ç»“æœã€‚

è¯¦ç»†ä¿¡æ¯è¯·å‚é˜… `library_example` ç›®å½•ä¸­çš„ç¤ºä¾‹åº“å’Œè¯´æ˜æ–‡æ¡£ã€‚

### æšä¸¾ç±»å‹ (Enum)

CodeNothing æ”¯æŒç±»ä¼¼ Rust çš„æšä¸¾ç±»å‹ï¼Œå¯ä»¥å®šä¹‰å¸¦æœ‰æˆ–ä¸å¸¦æœ‰å‚æ•°çš„æšä¸¾å˜ä½“ã€‚

#### åŸºç¡€æšä¸¾

```
enum Color {
    Red,
    Green,
    Blue
};

// ä½¿ç”¨æšä¸¾
red : Color = Color::Red;
green : Color = Color::Green;
```

#### å¸¦å‚æ•°çš„æšä¸¾

```
enum Shape {
    Circle(float),
    Rectangle(float, float),
    Triangle(float, float, float)
};

// åˆ›å»ºå¸¦å‚æ•°çš„æšä¸¾å˜ä½“
circle : Shape = Shape::Circle(5.0);
rectangle : Shape = Shape::Rectangle(10.0, 20.0);
triangle : Shape = Shape::Triangle(3.0, 4.0, 5.0);
```

#### å¤æ‚æšä¸¾ç¤ºä¾‹

```
enum Message {
    Quit,
    Move(int, int),
    Write(string),
    ChangeColor(int, int, int)
};

// åˆ›å»ºä¸åŒç±»å‹çš„æ¶ˆæ¯
quit_msg : Message = Message::Quit;
move_msg : Message = Message::Move(10, 20);
write_msg : Message = Message::Write("Hello, World!");
color_msg : Message = Message::ChangeColor(255, 128, 64);
```

æšä¸¾ç±»å‹å¯ä»¥ä½œä¸ºå‡½æ•°å‚æ•°å’Œè¿”å›å€¼ä½¿ç”¨ï¼Œæ”¯æŒå­—ç¬¦ä¸²è¿æ¥æ“ä½œï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ§åˆ¶å°ä¸­æ­£ç¡®æ˜¾ç¤ºã€‚

### è¿è¡ŒåŸºå‡†æµ‹è¯•

```bash
# è¿è¡Œå®Œæ•´åŸºå‡†æµ‹è¯•å¥—ä»¶
bash benchmarks/scripts/run_benchmarks.sh

# æŸ¥çœ‹è¯¦ç»†æ€§èƒ½æŠ¥å‘Š
cat benchmarks/results/performance_report_*.md
```

è¯¦ç»†çš„æ€§èƒ½ä¼˜åŒ–æŠ¥å‘Šè¯·å‚è§ï¼š[æ€§èƒ½ä¼˜åŒ–æ–‡æ¡£](docs/performance-optimization-v0.5.10.md)