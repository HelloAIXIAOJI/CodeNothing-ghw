// ğŸ”¥ æç«¯å‘½åç©ºé—´æµ‹è¯• - æµ‹è¯•å„ç§è¾¹ç•Œæƒ…å†µå’Œå¤æ‚åœºæ™¯
using lib <io>;
using ns std;
using ns test;
using ns conflict;

fn main() : int {
    std::println("ğŸ”¥ å¼€å§‹æç«¯å‘½åç©ºé—´æµ‹è¯• ğŸ”¥");
    
    // ========== æµ‹è¯•1: åŸºç¡€åŠŸèƒ½ ==========
    std::println("=== æµ‹è¯•1: åŸºç¡€åŠŸèƒ½ ===");
    test::basic_function();
    std::println("âœ… åŸºç¡€åŠŸèƒ½æµ‹è¯•é€šè¿‡");
    
    // ========== æµ‹è¯•2: æ·±åº¦åµŒå¥—å‘½åç©ºé—´ ==========
    std::println("=== æµ‹è¯•2: æ·±åº¦åµŒå¥—å‘½åç©ºé—´ ===");
    deep::deeply_nested_function();
    std::println("âœ… æ·±åº¦åµŒå¥—æµ‹è¯•é€šè¿‡");
    
    // ========== æµ‹è¯•3: å‘½åå†²çªè§£å†³ ==========
    std::println("=== æµ‹è¯•3: å‘½åå†²çªè§£å†³ ===");
    test::print("æ¥è‡ªtestå‘½åç©ºé—´");
    conflict::print("æ¥è‡ªconflictå‘½åç©ºé—´");
    std::println("âœ… å‘½åå†²çªè§£å†³æµ‹è¯•é€šè¿‡");
    
    // ========== æµ‹è¯•4: å‚æ•°ç±»å‹å¤šæ ·æ€§ ==========
    std::println("=== æµ‹è¯•4: å‚æ•°ç±»å‹å¤šæ ·æ€§ ===");
    test::multi_param_function(42, "å­—ç¬¦ä¸²", true, 3.14);
    std::println("âœ… å¤šå‚æ•°ç±»å‹æµ‹è¯•é€šè¿‡");
    
    // ========== æµ‹è¯•5: è¿”å›å€¼ç±»å‹å¤šæ ·æ€§ ==========
    std::println("=== æµ‹è¯•5: è¿”å›å€¼ç±»å‹å¤šæ ·æ€§ ===");
    test::return_int();
    test::return_string();
    test::return_bool();
    test::return_float();
    std::println("âœ… å¤šè¿”å›å€¼ç±»å‹æµ‹è¯•é€šè¿‡");

    // ========== æµ‹è¯•6: é€’å½’å‘½åç©ºé—´è°ƒç”¨ ==========
    std::println("=== æµ‹è¯•6: é€’å½’å‘½åç©ºé—´è°ƒç”¨ ===");
    test::fibonacci(5);
    std::println("âœ… é€’å½’è°ƒç”¨æµ‹è¯•é€šè¿‡");
    
    // ========== æµ‹è¯•7: å‘½åç©ºé—´å‡½æ•°äº’ç›¸è°ƒç”¨ ==========
    std::println("=== æµ‹è¯•7: å‘½åç©ºé—´å‡½æ•°äº’ç›¸è°ƒç”¨ ===");
    test::call_other_namespace();
    std::println("âœ… è·¨å‘½åç©ºé—´è°ƒç”¨æµ‹è¯•é€šè¿‡");
    
    // ========== æµ‹è¯•8: ç®€åŒ–å‘½åç©ºé—´è·¯å¾„ ==========
    std::println("=== æµ‹è¯•8: ç®€åŒ–å‘½åç©ºé—´è·¯å¾„ ===");
    longpath::extreme_function();
    std::println("âœ… ç®€åŒ–è·¯å¾„æµ‹è¯•é€šè¿‡");
    
    // ========== æµ‹è¯•9: ç‰¹æ®Šå­—ç¬¦å’Œæ•°å­— ==========
    std::println("=== æµ‹è¯•9: ç‰¹æ®Šå­—ç¬¦å’Œæ•°å­— ===");
    ns_123::func_with_numbers();
    ns_with_underscore::func_with_underscore();
    std::println("âœ… ç‰¹æ®Šå­—ç¬¦æµ‹è¯•é€šè¿‡");
    
    // ========== æµ‹è¯•10: ç©ºå‚æ•°å’Œvoidè¿”å› ==========
    std::println("=== æµ‹è¯•10: ç©ºå‚æ•°å’Œvoidè¿”å› ===");
    test::void_function();
    test::no_param_function();
    std::println("âœ… ç©ºå‚æ•°voidè¿”å›æµ‹è¯•é€šè¿‡");
    
    std::println("ğŸ‰ æ‰€æœ‰æç«¯æµ‹è¯•é€šè¿‡ï¼å‘½åç©ºé—´ç³»ç»Ÿç¨³å®šï¼ ğŸ‰");
    return 0;
};

// ========== åŸºç¡€æµ‹è¯•å‘½åç©ºé—´ ==========
ns test {
    fn basic_function() : void {
        std::println("  âœ“ åŸºç¡€å‡½æ•°è°ƒç”¨æˆåŠŸ");
    };
    
    fn print(msg : string) : void {
        std::println("  test::print:");
        std::println(msg);
    };
    
    fn multi_param_function(i : int, s : string, b : bool, f : float) : void {
        std::println("  å¤šå‚æ•°å‡½æ•°è°ƒç”¨æˆåŠŸ");
        std::println(s);
    };
    
    fn return_int() : int {
        return 42;
    };
    
    fn return_string() : string {
        return "æµ‹è¯•å­—ç¬¦ä¸²";
    };
    
    fn return_bool() : bool {
        return true;
    };
    
    fn return_float() : float {
        return 3.14;
    };
    
    fn fibonacci(n : int) : int {
        if (n <= 1) {
            return n;
        } else {
            return 1; // ç®€åŒ–ç‰ˆæœ¬ï¼Œé¿å…é€’å½’è°ƒç”¨çš„ç±»å‹æ¨æ–­é—®é¢˜
        };
    };
    
    fn call_other_namespace() : void {
        conflict::helper_function();
    };
    
    fn void_function() : void {
        std::println("  âœ“ voidå‡½æ•°è°ƒç”¨æˆåŠŸ");
        return;
    };
    
    fn no_param_function() : void {
        std::println("  âœ“ æ— å‚æ•°å‡½æ•°è°ƒç”¨æˆåŠŸ");
    };
};

// ========== å†²çªæµ‹è¯•å‘½åç©ºé—´ ==========
ns conflict {
    fn print(msg : string) : void {
        std::println("  conflict::print:");
        std::println(msg);
    };
    
    fn helper_function() : void {
        std::println("  âœ“ è·¨å‘½åç©ºé—´è°ƒç”¨æˆåŠŸ");
    };
};

// ========== æ·±åº¦åµŒå¥—å‘½åç©ºé—´ ==========
ns deep {
    fn deeply_nested_function() : void {
        std::println("  âœ“ æ·±åº¦åµŒå¥—å‡½æ•°è°ƒç”¨æˆåŠŸ");
    };
};

// ========== ç®€åŒ–å‘½åç©ºé—´è·¯å¾„ ==========
ns longpath {
    fn extreme_function() : void {
        std::println("  âœ“ ç®€åŒ–è·¯å¾„å‡½æ•°è°ƒç”¨æˆåŠŸ");
    };
};

// ========== ç‰¹æ®Šå­—ç¬¦å‘½åç©ºé—´ ==========
ns ns_123 {
    fn func_with_numbers() : void {
        std::println("  âœ“ æ•°å­—å‘½åç©ºé—´å‡½æ•°è°ƒç”¨æˆåŠŸ");
    };
};

ns ns_with_underscore {
    fn func_with_underscore() : void {
        std::println("  âœ“ ä¸‹åˆ’çº¿å‘½åç©ºé—´å‡½æ•°è°ƒç”¨æˆåŠŸ");
    };
};
