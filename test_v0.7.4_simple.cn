// CodeNothing v0.7.4 简单的变量生命周期优化测试
using lib <io>;

fn main(): int {
    println("=== CodeNothing v0.7.4 变量生命周期优化测试 ===");
    
    // 测试局部变量优化
    test_local_variables();
    
    // 测试函数参数优化
    test_function_params(100, 200);
    
    println("变量生命周期优化测试完成!");
    return 0;
};

// 测试局部变量优化
fn test_local_variables(): void {
    println("=== 测试1: 局部变量优化 ===");
    
    // 这些变量应该被标记为安全（单次赋值，局部作用域）
    a : int = 10;
    b : int = 20;
    c : int = 30;
    
    // 大量变量访问操作
    result : int = 0;
    i : int = 0;
    while (i < 100) {
        // 这些变量访问应该被优化（跳过边界检查）
        temp : int = a + b + c;
        result = result + temp;
        i = i + 1;
    };
    
    println("局部变量优化测试完成");
};

// 测试函数参数优化
fn test_function_params(param1 : int, param2 : int): void {
    println("=== 测试2: 函数参数优化 ===");
    
    // 函数参数应该被标记为安全
    result : int = 0;
    i : int = 0;
    while (i < 50) {
        // param1和param2的访问应该被优化
        result = result + param1 + param2;
        i = i + 1;
    };
    
    println("函数参数优化测试完成");
};
