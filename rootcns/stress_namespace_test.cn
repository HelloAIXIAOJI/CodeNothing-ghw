// ğŸš€ å‹åŠ›æµ‹è¯• - æµ‹è¯•å‘½åç©ºé—´ç³»ç»Ÿçš„æé™
using lib <io>;
using ns std;
using ns a;
using ns b;
using ns c;
using ns d;
using ns e;

fn main() : int {
    std::println("ğŸš€ å¼€å§‹å‘½åç©ºé—´å‹åŠ›æµ‹è¯• ğŸš€");
    
    // ========== æµ‹è¯•1: å¤§é‡å‘½åç©ºé—´åŒæ—¶ä½¿ç”¨ ==========
    std::println("=== æµ‹è¯•1: å¤§é‡å‘½åç©ºé—´åŒæ—¶ä½¿ç”¨ ===");
    a::func();
    b::func();
    c::func();
    d::func();
    e::func();
    std::println("âœ… å¤§é‡å‘½åç©ºé—´æµ‹è¯•é€šè¿‡");
    
    // ========== æµ‹è¯•2: ç›¸åŒå‡½æ•°åä¸åŒå‘½åç©ºé—´ ==========
    std::println("=== æµ‹è¯•2: ç›¸åŒå‡½æ•°åä¸åŒå‘½åç©ºé—´ ===");
    a::test();
    b::test();
    c::test();
    d::test();
    e::test();
    std::println("âœ… ç›¸åŒå‡½æ•°åæµ‹è¯•é€šè¿‡");
    
    // ========== æµ‹è¯•3: æ·±åº¦è°ƒç”¨é“¾ ==========
    std::println("=== æµ‹è¯•3: æ·±åº¦è°ƒç”¨é“¾ ===");
    a::call_b();
    std::println("âœ… æ·±åº¦è°ƒç”¨é“¾æµ‹è¯•é€šè¿‡");
    
    // ========== æµ‹è¯•4: å¾ªç¯è°ƒç”¨æ£€æµ‹ ==========
    std::println("=== æµ‹è¯•4: å¾ªç¯è°ƒç”¨æ£€æµ‹ ===");
    a::safe_call();
    std::println("âœ… å¾ªç¯è°ƒç”¨æ£€æµ‹æµ‹è¯•é€šè¿‡");
    
    // ========== æµ‹è¯•5: é”™è¯¯å¤„ç† ==========
    std::println("=== æµ‹è¯•5: é”™è¯¯å¤„ç† ===");
    a::error_test();
    std::println("âœ… é”™è¯¯å¤„ç†æµ‹è¯•é€šè¿‡");
    
    std::println("ğŸ‰ æ‰€æœ‰å‹åŠ›æµ‹è¯•é€šè¿‡ï¼ç³»ç»Ÿç¨³å®šï¼ ğŸ‰");
    return 0;
};

// ========== å‘½åç©ºé—´A ==========
ns a {
    fn func() : void {
        std::println("  âœ“ å‘½åç©ºé—´Aå‡½æ•°è°ƒç”¨");
    };
    
    fn test() : void {
        std::println("  âœ“ A::test");
    };
    
    fn call_b() : void {
        std::println("  Aè°ƒç”¨B");
        b::call_c();
    };
    
    fn safe_call() : void {
        std::println("  Aå®‰å…¨è°ƒç”¨");
        b::safe_response();
    };
    
    fn error_test() : void {
        std::println("  Aé”™è¯¯æµ‹è¯•");
        b::handle_error();
    };
};

// ========== å‘½åç©ºé—´B ==========
ns b {
    fn func() : void {
        std::println("  âœ“ å‘½åç©ºé—´Bå‡½æ•°è°ƒç”¨");
    };
    
    fn test() : void {
        std::println("  âœ“ B::test");
    };
    
    fn call_c() : void {
        std::println("  Bè°ƒç”¨C");
        c::call_d();
    };
    
    fn safe_response() : void {
        std::println("  Bå®‰å…¨å“åº”");
    };
    
    fn handle_error() : void {
        std::println("  Bå¤„ç†é”™è¯¯");
        c::error_recovery();
    };
};

// ========== å‘½åç©ºé—´C ==========
ns c {
    fn func() : void {
        std::println("  âœ“ å‘½åç©ºé—´Cå‡½æ•°è°ƒç”¨");
    };
    
    fn test() : void {
        std::println("  âœ“ C::test");
    };
    
    fn call_d() : void {
        std::println("  Cè°ƒç”¨D");
        d::call_e();
    };
    
    fn error_recovery() : void {
        std::println("  Cé”™è¯¯æ¢å¤");
        d::final_cleanup();
    };
};

// ========== å‘½åç©ºé—´D ==========
ns d {
    fn func() : void {
        std::println("  âœ“ å‘½åç©ºé—´Då‡½æ•°è°ƒç”¨");
    };
    
    fn test() : void {
        std::println("  âœ“ D::test");
    };
    
    fn call_e() : void {
        std::println("  Dè°ƒç”¨E");
        e::final_call();
    };
    
    fn final_cleanup() : void {
        std::println("  Dæœ€ç»ˆæ¸…ç†");
        e::cleanup_complete();
    };
};

// ========== å‘½åç©ºé—´E ==========
ns e {
    fn func() : void {
        std::println("  âœ“ å‘½åç©ºé—´Eå‡½æ•°è°ƒç”¨");
    };
    
    fn test() : void {
        std::println("  âœ“ E::test");
    };
    
    fn final_call() : void {
        std::println("  Eæœ€ç»ˆè°ƒç”¨å®Œæˆ");
    };
    
    fn cleanup_complete() : void {
        std::println("  Eæ¸…ç†å®Œæˆ");
    };
};
