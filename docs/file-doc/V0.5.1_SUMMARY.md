# CodeNothing v0.5.1 修复总结

## 🎯 修复目标

修复 macOS 平台上动态库载入失败的问题，简化库文件查找逻辑。

## 🔧 修复内容

### 1. 平台支持修复
- ✅ **Windows**: `{}.dll`
- ✅ **macOS**: `{}.dylib` （修复前错误查找.so文件）
- ✅ **Linux**: `{}.so`

### 2. 简化查找逻辑
**查找目录（仅限两个）**：
1. 解释器目录/library/
2. 当前目录/library/

**文件命名规范**：
- 无lib前缀
- 平台特定扩展名

### 3. 错误信息改进
```
找不到库文件 'io'
查找位置:
- 解释器目录/library/
- 当前目录/library/
支持的文件格式: io.dylib, io.dll, io.dylib, io.so
```

## 📋 使用方式

### 库文件放置
```
# 方式1：解释器目录
CodeNothing.exe
└── library/
    ├── io.dll      (Windows)
    ├── io.dylib    (macOS)  
    └── io.so       (Linux)

# 方式2：当前目录
your_project/
├── main.cn
└── library/
    ├── io.dll
    ├── io.dylib
    └── io.so
```

### 代码使用
```codenothing
using lib <io>;  // 自动查找正确的平台文件
```

## ✅ 修复验证

- ✅ 编译成功
- ✅ 平台检测逻辑正确
- ✅ 文件查找逻辑简化
- ✅ 向后兼容性保持

## 📝 版本信息

**版本**: v0.5.1  
**发布**: 2025-07-28  
**类型**: 跨平台兼容性修复  
**影响**: 动态库载入功能  

---

**修复原则**: 简单、明确、不让用户猜测！
