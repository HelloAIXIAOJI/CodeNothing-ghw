// ğŸš€ CodeNothing v0.6.7 å‡½æ•°è°ƒç”¨JITç¼–è¯‘æµ‹è¯•
// éªŒè¯ç®€å•å‡½æ•°è°ƒç”¨ã€å†…è”å°å‡½æ•°å’Œé€’å½’å‡½æ•°ä¼˜åŒ–çš„JITç¼–è¯‘åŠŸèƒ½

using lib <io>;
using ns std;

// ç®€å•æ•°å­¦å‡½æ•°
fn add(a : int, b : int) : int {
    return a + b;
};

fn multiply(x : int, y : int) : int {
    return x * y;
};

fn square(n : int) : int {
    return n * n;
};

// å°å‡½æ•°ï¼ˆé€‚åˆå†…è”ï¼‰
fn double(x : int) : int {
    return x * 2;
};

fn triple(x : int) : int {
    return x * 3;
};

// é€’å½’å‡½æ•°
fn factorial(n : int) : int {
    if (n <= 1) {
        return 1;
    };
    return n * factorial(n - 1);
};

fn fibonacci(n : int) : int {
    if (n <= 1) {
        return n;
    };
    return fibonacci(n - 1) + fibonacci(n - 2);
};

fn main() : int {
    std::println("ğŸš€ CodeNothing v0.6.7 å‡½æ•°è°ƒç”¨JITç¼–è¯‘æµ‹è¯•");
    std::println("=====================================");
    std::println("ç›®æ ‡ï¼šéªŒè¯10-30å€æ€§èƒ½æå‡");
    std::println("=====================================");
    
    // ğŸ“Š æµ‹è¯•1ï¼šç®€å•å‡½æ•°è°ƒç”¨çƒ­ç‚¹æ£€æµ‹
    std::println("ğŸ  æµ‹è¯•1ï¼šç®€å•å‡½æ•°è°ƒç”¨çƒ­ç‚¹æ£€æµ‹");
    simple_result : int = 0;
    for (i : 1..101) {  // 100æ¬¡è¿­ä»£ï¼Œè§¦å‘å‡½æ•°è°ƒç”¨çƒ­ç‚¹æ£€æµ‹
        simple_result = simple_result + add(i, 10);
        simple_result = simple_result + multiply(i, 2);
        simple_result = simple_result + square(i);
    };
    std::println("ç®€å•å‡½æ•°è°ƒç”¨ç»“æœ: " + simple_result);
    std::println("-------------------------------------");
    
    // ğŸ“Š æµ‹è¯•2ï¼šå†…è”å°å‡½æ•°ä¼˜åŒ–æµ‹è¯•
    std::println("âš¡ æµ‹è¯•2ï¼šå†…è”å°å‡½æ•°ä¼˜åŒ–æµ‹è¯•");
    inline_result : int = 0;
    for (i : 1..101) {  // 100æ¬¡è¿­ä»£
        inline_result = inline_result + double(i);
        inline_result = inline_result + triple(i);
        inline_result = inline_result + double(triple(i));
    };
    std::println("å†…è”å‡½æ•°è°ƒç”¨ç»“æœ: " + inline_result);
    std::println("-------------------------------------");
    
    // ğŸ“Š æµ‹è¯•3ï¼šå‡½æ•°è°ƒç”¨å¯†é›†æµ‹è¯•
    std::println("ğŸ”¥ æµ‹è¯•3ï¼šå‡½æ•°è°ƒç”¨å¯†é›†æµ‹è¯•");
    intensive_result : int = 0;
    for (i : 1..201) {  // 200æ¬¡è¿­ä»£ï¼Œé«˜å¼ºåº¦æµ‹è¯•
        a : int = add(i, 5);
        b : int = multiply(a, 3);
        c : int = square(b);
        d : int = double(c);
        intensive_result = intensive_result + d;
    };
    std::println("å¯†é›†å‡½æ•°è°ƒç”¨ç»“æœ: " + intensive_result);
    std::println("-------------------------------------");
    
    // ğŸ“Š æµ‹è¯•4ï¼šåµŒå¥—å‡½æ•°è°ƒç”¨æµ‹è¯•
    std::println("ğŸ¯ æµ‹è¯•4ï¼šåµŒå¥—å‡½æ•°è°ƒç”¨æµ‹è¯•");
    nested_result : int = 0;
    for (i : 1..101) {  // 100æ¬¡è¿­ä»£
        nested_result = nested_result + add(multiply(i, 2), square(i));
        nested_result = nested_result + multiply(add(i, 3), double(i));
    };
    std::println("åµŒå¥—å‡½æ•°è°ƒç”¨ç»“æœ: " + nested_result);
    std::println("-------------------------------------");
    
    // ğŸ“Š æµ‹è¯•5ï¼šé€’å½’å‡½æ•°ä¼˜åŒ–æµ‹è¯•ï¼ˆå°è§„æ¨¡ï¼‰
    std::println("ğŸ”„ æµ‹è¯•5ï¼šé€’å½’å‡½æ•°ä¼˜åŒ–æµ‹è¯•");
    recursive_result : int = 0;
    for (i : 1..11) {  // 10æ¬¡è¿­ä»£ï¼Œé¿å…é€’å½’è¿‡æ·±
        if (i <= 5) {
            recursive_result = recursive_result + factorial(i);
        };
        if (i <= 8) {
            recursive_result = recursive_result + fibonacci(i);
        };
    };
    std::println("é€’å½’å‡½æ•°è°ƒç”¨ç»“æœ: " + recursive_result);
    std::println("-------------------------------------");
    
    // ğŸ“Š æµ‹è¯•6ï¼šæ··åˆå‡½æ•°è°ƒç”¨æ¨¡å¼æµ‹è¯•
    std::println("ğŸ¨ æµ‹è¯•6ï¼šæ··åˆå‡½æ•°è°ƒç”¨æ¨¡å¼æµ‹è¯•");
    mixed_result : int = 0;
    for (i : 1..151) {  // 150æ¬¡è¿­ä»£
        // ç®€å•å‡½æ•°è°ƒç”¨
        temp1 : int = add(i, 10);
        // å†…è”å‡½æ•°è°ƒç”¨
        temp2 : int = double(temp1);
        // åµŒå¥—å‡½æ•°è°ƒç”¨
        temp3 : int = multiply(square(i), triple(2));
        // ç»„åˆç»“æœ
        mixed_result = mixed_result + temp1 + temp2 + temp3;
    };
    std::println("æ··åˆå‡½æ•°è°ƒç”¨ç»“æœ: " + mixed_result);
    std::println("-------------------------------------");
    
    // ğŸ“Š æµ‹è¯•7ï¼šé«˜é¢‘å°å‡½æ•°è°ƒç”¨æµ‹è¯•
    std::println("âš¡ æµ‹è¯•7ï¼šé«˜é¢‘å°å‡½æ•°è°ƒç”¨æµ‹è¯•");
    high_freq_result : int = 0;
    for (i : 1..301) {  // 300æ¬¡è¿­ä»£ï¼Œè¶…é«˜é¢‘æµ‹è¯•
        high_freq_result = high_freq_result + double(i);
        high_freq_result = high_freq_result + triple(i);
        if (i % 2 == 0) {
            high_freq_result = high_freq_result + square(i);
        };
        if (i % 3 == 0) {
            high_freq_result = high_freq_result + add(i, 1);
        };
    };
    std::println("é«˜é¢‘å‡½æ•°è°ƒç”¨ç»“æœ: " + high_freq_result);
    std::println("=====================================");
    
    // è®¡ç®—æ€»ä½“æ€§èƒ½æŒ‡æ ‡
    total_operations : int = simple_result + inline_result + intensive_result + nested_result + recursive_result + mixed_result + high_freq_result;
    std::println("ğŸ“ˆ æ€§èƒ½ç»Ÿè®¡æ€»ç»“:");
    std::println("æ€»æ“ä½œæ•°: " + total_operations);
    std::println("æ€»è¿­ä»£æ¬¡æ•°: 1200+");
    std::println("=====================================");
    
    std::println("ğŸ‰ å‡½æ•°è°ƒç”¨JITç¼–è¯‘æµ‹è¯•å®Œæˆï¼");
    std::println("è¯·æŸ¥çœ‹JITç»Ÿè®¡ä¿¡æ¯éªŒè¯10-30å€æ€§èƒ½æå‡");
    
    return 0;
};
