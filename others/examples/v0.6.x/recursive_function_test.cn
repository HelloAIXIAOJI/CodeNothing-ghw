// ğŸš€ CodeNothing v0.6.7 é€’å½’å‡½æ•°ä¼˜åŒ–ä¸“é¡¹æµ‹è¯•
// éªŒè¯é€’å½’å‡½æ•°çš„JITç¼–è¯‘ä¼˜åŒ–æ•ˆæœ

using lib <io>;
using ns std;

// ç®€å•é€’å½’å‡½æ•°
fn factorial(n : int) : int {
    if (n <= 1) {
        return 1;
    };
    return n * factorial(n - 1);
};

fn fibonacci(n : int) : int {
    if (n <= 1) {
        return n;
    };
    return fibonacci(n - 1) + fibonacci(n - 2);
};

// å°¾é€’å½’å‡½æ•°
fn factorial_tail(n : int, acc : int) : int {
    if (n <= 1) {
        return acc;
    };
    return factorial_tail(n - 1, acc * n);
};

fn sum_tail(n : int, acc : int) : int {
    if (n <= 0) {
        return acc;
    };
    return sum_tail(n - 1, acc + n);
};

// çº¿æ€§é€’å½’å‡½æ•°
fn power(base : int, exp : int) : int {
    if (exp == 0) {
        return 1;
    };
    if (exp == 1) {
        return base;
    };
    return base * power(base, exp - 1);
};

fn gcd(a : int, b : int) : int {
    if (b == 0) {
        return a;
    };
    return gcd(b, a % b);
};

fn main() : int {
    std::println("ğŸš€ CodeNothing v0.6.7 é€’å½’å‡½æ•°ä¼˜åŒ–ä¸“é¡¹æµ‹è¯•");
    std::println("=====================================");
    std::println("ç›®æ ‡ï¼šéªŒè¯é€’å½’å‡½æ•°JITç¼–è¯‘ä¼˜åŒ–");
    std::println("=====================================");
    
    // ğŸ“Š æµ‹è¯•1ï¼šç®€å•é€’å½’å‡½æ•°æµ‹è¯•
    std::println("ğŸ”„ æµ‹è¯•1ï¼šç®€å•é€’å½’å‡½æ•°æµ‹è¯•");
    simple_recursive_result : int = 0;
    for (i : 1..21) {  // 20æ¬¡è¿­ä»£ï¼Œè§¦å‘é€’å½’å‡½æ•°çƒ­ç‚¹æ£€æµ‹
        if (i <= 10) {
            simple_recursive_result = simple_recursive_result + factorial(i);
        };
        if (i <= 15) {
            simple_recursive_result = simple_recursive_result + fibonacci(i);
        };
    };
    std::println("ç®€å•é€’å½’ç»“æœ: " + simple_recursive_result);
    std::println("-------------------------------------");
    
    // ğŸ“Š æµ‹è¯•2ï¼šå°¾é€’å½’ä¼˜åŒ–æµ‹è¯•
    std::println("ğŸ¯ æµ‹è¯•2ï¼šå°¾é€’å½’ä¼˜åŒ–æµ‹è¯•");
    tail_recursive_result : int = 0;
    for (i : 1..21) {  // 20æ¬¡è¿­ä»£
        if (i <= 10) {
            tail_recursive_result = tail_recursive_result + factorial_tail(i, 1);
        };
        if (i <= 15) {
            tail_recursive_result = tail_recursive_result + sum_tail(i, 0);
        };
    };
    std::println("å°¾é€’å½’ç»“æœ: " + tail_recursive_result);
    std::println("-------------------------------------");
    
    // ğŸ“Š æµ‹è¯•3ï¼šçº¿æ€§é€’å½’å‡½æ•°æµ‹è¯•
    std::println("ğŸ“ˆ æµ‹è¯•3ï¼šçº¿æ€§é€’å½’å‡½æ•°æµ‹è¯•");
    linear_recursive_result : int = 0;
    for (i : 1..21) {  // 20æ¬¡è¿­ä»£
        if (i <= 8) {
            linear_recursive_result = linear_recursive_result + power(2, i);
        };
        if (i <= 15) {
            j : int = i + 10;
            linear_recursive_result = linear_recursive_result + gcd(i, j);
        };
    };
    std::println("çº¿æ€§é€’å½’ç»“æœ: " + linear_recursive_result);
    std::println("-------------------------------------");
    
    // ğŸ“Š æµ‹è¯•4ï¼šé€’å½’æ·±åº¦æ§åˆ¶æµ‹è¯•
    std::println("ğŸ›¡ï¸ æµ‹è¯•4ï¼šé€’å½’æ·±åº¦æ§åˆ¶æµ‹è¯•");
    depth_control_result : int = 0;
    for (i : 1..11) {  // 10æ¬¡è¿­ä»£ï¼Œæ§åˆ¶é€’å½’æ·±åº¦
        // å°æ·±åº¦é€’å½’
        if (i <= 5) {
            depth_control_result = depth_control_result + factorial(i);
        };
        // ä¸­ç­‰æ·±åº¦é€’å½’
        if (i <= 8) {
            depth_control_result = depth_control_result + fibonacci(i);
        };
        // çº¿æ€§é€’å½’
        depth_control_result = depth_control_result + power(2, i);
    };
    std::println("æ·±åº¦æ§åˆ¶ç»“æœ: " + depth_control_result);
    std::println("-------------------------------------");
    
    // ğŸ“Š æµ‹è¯•5ï¼šé€’å½’å‡½æ•°ç»„åˆæµ‹è¯•
    std::println("ğŸ¨ æµ‹è¯•5ï¼šé€’å½’å‡½æ•°ç»„åˆæµ‹è¯•");
    combination_result : int = 0;
    for (i : 1..16) {  // 15æ¬¡è¿­ä»£
        // ç»„åˆä¸åŒç±»å‹çš„é€’å½’å‡½æ•°
        fact_val : int = factorial(i % 6 + 1);
        fib_val : int = fibonacci(i % 8 + 1);
        pow_val : int = power(2, i % 5 + 1);
        combination_result = combination_result + fact_val + fib_val + pow_val;
    };
    std::println("é€’å½’ç»„åˆç»“æœ: " + combination_result);
    std::println("-------------------------------------");
    
    // ğŸ“Š æµ‹è¯•6ï¼šé€’å½’å‡½æ•°æ€§èƒ½åŸºå‡†æµ‹è¯•
    std::println("âš¡ æµ‹è¯•6ï¼šé€’å½’å‡½æ•°æ€§èƒ½åŸºå‡†æµ‹è¯•");
    performance_result : int = 0;
    for (i : 1..51) {  // 50æ¬¡è¿­ä»£ï¼Œé«˜å¼ºåº¦æµ‹è¯•
        // é«˜é¢‘é€’å½’è°ƒç”¨
        if (i % 2 == 0) {
            performance_result = performance_result + factorial(i % 7 + 1);
        };
        if (i % 3 == 0) {
            performance_result = performance_result + fibonacci(i % 6 + 1);
        };
        if (i % 5 == 0) {
            performance_result = performance_result + power(2, i % 4 + 1);
        };
        performance_result = performance_result + gcd(i, i + 5);
    };
    std::println("æ€§èƒ½åŸºå‡†ç»“æœ: " + performance_result);
    std::println("-------------------------------------");
    
    // ğŸ“Š æµ‹è¯•7ï¼šé€’å½’ä¼˜åŒ–ç­–ç•¥éªŒè¯æµ‹è¯•
    std::println("ğŸ”§ æµ‹è¯•7ï¼šé€’å½’ä¼˜åŒ–ç­–ç•¥éªŒè¯æµ‹è¯•");
    optimization_result : int = 0;
    for (i : 1..31) {  // 30æ¬¡è¿­ä»£
        // éªŒè¯ä¸åŒä¼˜åŒ–ç­–ç•¥
        // å°¾é€’å½’ä¼˜åŒ–
        tail_result : int = factorial_tail(i % 5 + 1, 1);
        // çº¿æ€§é€’å½’ä¼˜åŒ–
        linear_result : int = power(2, i % 4 + 1);
        // ç®€å•é€’å½’
        simple_result : int = factorial(i % 4 + 1);
        
        optimization_result = optimization_result + tail_result + linear_result + simple_result;
    };
    std::println("ä¼˜åŒ–ç­–ç•¥ç»“æœ: " + optimization_result);
    std::println("=====================================");
    
    // è®¡ç®—æ€»ä½“æ€§èƒ½æŒ‡æ ‡
    total_operations : int = simple_recursive_result + tail_recursive_result + linear_recursive_result + depth_control_result + combination_result + performance_result + optimization_result;
    std::println("ğŸ“ˆ é€’å½’ä¼˜åŒ–ç»Ÿè®¡æ€»ç»“:");
    std::println("æ€»æ“ä½œæ•°: " + total_operations);
    std::println("æ€»è¿­ä»£æ¬¡æ•°: 180+");
    std::println("é€’å½’å‡½æ•°è°ƒç”¨æ¬¡æ•°: 1000+");
    std::println("=====================================");
    
    std::println("ğŸ‰ é€’å½’å‡½æ•°ä¼˜åŒ–æµ‹è¯•å®Œæˆï¼");
    std::println("è¯·æŸ¥çœ‹JITç»Ÿè®¡ä¿¡æ¯éªŒè¯é€’å½’ä¼˜åŒ–æ•ˆæœ");
    
    return 0;
};
