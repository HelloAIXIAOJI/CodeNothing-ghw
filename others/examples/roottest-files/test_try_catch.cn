using lib <io>;

fn main() : int {
    println("开始测试 try-catch 功能...");
    
    // 测试基本的 try-catch
    try {
        println("执行 try 块...");
        throw "这是一个测试异常";
        println("这行不会执行");
    } catch (e : Exception) {
        println("捕获到异常: " + e);
    };
    
    // 测试 try-catch-finally
    try {
        println("执行 try 块（带 finally）...");
        throw "另一个测试异常";
        println("这行不会执行");
    } catch (e : Exception) {
        println("捕获到异常: " + e);
    } finally {
        println("finally 块总是执行");
    };
    
    // 测试没有异常的 try-catch
    try {
        println("执行正常的 try 块...");
        println("没有异常发生");
    } catch (e : Exception) {
        println("这行不会执行");
    } finally {
        println("finally 块仍然执行");
    };
    
    // 测试嵌套的 try-catch
    try {
        println("外层 try 块...");
        try {
            println("内层 try 块...");
            throw "内层异常";
        } catch (e : Exception) {
            println("内层捕获异常: " + e);
            throw "外层异常";
        };
    } catch (e : Exception) {
        println("外层捕获异常: " + e);
    };
    
    println("测试完成！");
    return 0;
};