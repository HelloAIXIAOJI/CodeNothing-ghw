// CodeNothing v0.7.6 å¾ªç¯ä¸“ç”¨å†…å­˜ç®¡ç†åŸºå‡†æµ‹è¯•
// ç›®æ ‡ï¼šéªŒè¯40%çš„å¾ªç¯æ€§èƒ½æå‡ï¼ˆç›¸æ¯”v0.7.5ï¼‰
// æµ‹è¯•åœºæ™¯ï¼šå¯†é›†å¾ªç¯æ“ä½œã€åµŒå¥—å¾ªç¯ã€å¾ªç¯å˜é‡ç®¡ç†

// æµ‹è¯•1ï¼šç®€å•è®¡æ•°å¾ªç¯ - æµ‹è¯•å¾ªç¯è®¡æ•°å™¨ä¼˜åŒ–
fn test_simple_counting() : int {
    print("ğŸ”„ æµ‹è¯•1: ç®€å•è®¡æ•°å¾ªç¯");
    
    sum : int = 0;
    for i in 1 to 10000 {
        sum = sum + i;
    }
    
    print("è®¡æ•°å¾ªç¯ç»“æœ: " + sum);
    return sum;
}

// æµ‹è¯•2ï¼šç´¯åŠ å™¨å¾ªç¯ - æµ‹è¯•ç´¯åŠ å™¨å˜é‡ä¼˜åŒ–
fn test_accumulator_loop() : int {
    print("ğŸ”„ æµ‹è¯•2: ç´¯åŠ å™¨å¾ªç¯");
    
    total : int = 0;
    count : int = 0;
    
    for i in 1 to 5000 {
        total = total + i * 2;
        count = count + 1;
    }
    
    average : int = total / count;
    print("ç´¯åŠ å™¨å¾ªç¯ - æ€»è®¡: " + total + ", å¹³å‡: " + average);
    return total;
}

// æµ‹è¯•3ï¼šåµŒå¥—å¾ªç¯ - æµ‹è¯•åµŒå¥—å¾ªç¯å†…å­˜ç®¡ç†
fn test_nested_loops() : int {
    print("ğŸ”„ æµ‹è¯•3: åµŒå¥—å¾ªç¯");
    
    result : int = 0;
    
    for i in 1 to 100 {
        for j in 1 to 100 {
            temp : int = i * j;
            result = result + temp;
        }
    }
    
    print("åµŒå¥—å¾ªç¯ç»“æœ: " + result);
    return result;
}

// æµ‹è¯•4ï¼šå¾ªç¯ä¸­çš„ä¸´æ—¶å˜é‡ - æµ‹è¯•ä¸´æ—¶å˜é‡ä¼˜åŒ–
fn test_temporary_variables() : int {
    print("ğŸ”„ æµ‹è¯•4: å¾ªç¯ä¸´æ—¶å˜é‡");
    
    sum : int = 0;
    
    for i in 1 to 3000 {
        temp1 : int = i * 2;
        temp2 : int = temp1 + 5;
        temp3 : int = temp2 * 3;
        sum = sum + temp3;
    }
    
    print("ä¸´æ—¶å˜é‡å¾ªç¯ç»“æœ: " + sum);
    return sum;
}

// æµ‹è¯•5ï¼šWhileå¾ªç¯ - æµ‹è¯•whileå¾ªç¯å†…å­˜ç®¡ç†
fn test_while_loop() : int {
    print("ğŸ”„ æµ‹è¯•5: Whileå¾ªç¯");
    
    counter : int = 0;
    sum : int = 0;
    
    while counter < 2000 {
        sum = sum + counter;
        counter = counter + 1;
    }
    
    print("Whileå¾ªç¯ç»“æœ: " + sum);
    return sum;
}

// æµ‹è¯•6ï¼šå¤æ‚å¾ªç¯æ¨¡å¼ - æµ‹è¯•å¤æ‚çš„å¾ªç¯å˜é‡ç®¡ç†
fn test_complex_loop_pattern() : int {
    print("ğŸ”„ æµ‹è¯•6: å¤æ‚å¾ªç¯æ¨¡å¼");
    
    sum1 : int = 0;
    sum2 : int = 0;
    product : int = 1;
    
    for i in 1 to 1000 {
        // å¤šä¸ªç´¯åŠ å™¨
        sum1 = sum1 + i;
        sum2 = sum2 + i * i;
        
        // æ¡ä»¶ç´¯ä¹˜
        if i % 10 == 0 {
            product = product * 2;
        }
        
        // ä¸´æ—¶è®¡ç®—
        temp_calc : int = sum1 + sum2;
        if temp_calc > 1000000 {
            break;
        }
    }
    
    result : int = sum1 + sum2 + product;
    print("å¤æ‚å¾ªç¯ç»“æœ: " + result);
    return result;
}

// æµ‹è¯•7ï¼šæ•°ç»„æ“ä½œå¾ªç¯ - æµ‹è¯•æ•°ç»„ç›¸å…³çš„å¾ªç¯ä¼˜åŒ–
fn test_array_loop() : int {
    print("ğŸ”„ æµ‹è¯•7: æ•°ç»„æ“ä½œå¾ªç¯");
    
    // åˆ›å»ºæ•°ç»„
    arr : array = [1, 2, 3, 4, 5];
    sum : int = 0;
    
    // é‡å¤å¤„ç†æ•°ç»„
    for round in 1 to 500 {
        for item in arr {
            sum = sum + item;
        }
    }
    
    print("æ•°ç»„å¾ªç¯ç»“æœ: " + sum);
    return sum;
}

// æµ‹è¯•8ï¼šå¾ªç¯ä¸å˜é‡ - æµ‹è¯•å¾ªç¯ä¸å˜é‡ä¼˜åŒ–
fn test_loop_invariant() : int {
    print("ğŸ”„ æµ‹è¯•8: å¾ªç¯ä¸å˜é‡");
    
    constant_value : int = 42;  // å¾ªç¯ä¸å˜é‡
    sum : int = 0;
    
    for i in 1 to 2000 {
        // constant_valueåœ¨å¾ªç¯ä¸­ä¸å˜ï¼Œåº”è¯¥è¢«ä¼˜åŒ–
        result : int = i + constant_value;
        sum = sum + result;
    }
    
    print("å¾ªç¯ä¸å˜é‡ç»“æœ: " + sum);
    return sum;
}

// ä¸»æµ‹è¯•å‡½æ•°
fn main() : int {
    print("=== CodeNothing v0.7.6 å¾ªç¯ä¸“ç”¨å†…å­˜ç®¡ç†åŸºå‡†æµ‹è¯• ===");
    print("ç›®æ ‡ï¼šéªŒè¯40%å¾ªç¯æ€§èƒ½æå‡");
    print("");
    
    // æ‰§è¡Œæ‰€æœ‰æµ‹è¯•
    result1 : int = test_simple_counting();
    result2 : int = test_accumulator_loop();
    result3 : int = test_nested_loops();
    result4 : int = test_temporary_variables();
    result5 : int = test_while_loop();
    result6 : int = test_complex_loop_pattern();
    result7 : int = test_array_loop();
    result8 : int = test_loop_invariant();
    
    // è®¡ç®—æ€»ç»“æœ
    total_result : int = result1 + result2 + result3 + result4 + result5 + result6 + result7 + result8;
    
    print("");
    print("=== æµ‹è¯•å®Œæˆ ===");
    print("æ‰€æœ‰æµ‹è¯•æ€»è®¡: " + total_result);
    print("å¾ªç¯å†…å­˜ç®¡ç†ç³»ç»Ÿå·²éªŒè¯");
    
    return total_result;
}

// å¯åŠ¨æµ‹è¯•
main();
