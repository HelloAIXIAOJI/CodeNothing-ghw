using lib <io>;
using ns std;

// 简单的数组JIT编译测试
fn main(): int {
    std::println("🧮 简单数组JIT编译测试开始");
    
    // 创建测试数组
    arr : array<int> = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    
    // 测试数组访问（重复多次以触发JIT编译）
    sum : int = 0;
    i : int = 0;
    
    // 第一轮：解释执行
    while (i < 10) {
        sum = sum + arr[i];
        i = i + 1;
    };
    
    std::println("第一轮数组访问完成，总和: " + sum);
    
    // 重复多次以触发JIT编译
    round : int = 0;
    while (round < 20) {
        i = 0;
        while (i < 10) {
            sum = sum + arr[i];
            i = i + 1;
        };
        round = round + 1;
    };
    
    std::println("多轮数组访问完成，最终总和: " + sum);
    
    // 测试数组边界检查
    std::println("测试数组边界访问:");
    std::println("arr[0] = " + arr[0]);
    std::println("arr[9] = " + arr[9]);
    
    std::println("🎉 简单数组JIT编译测试完成！");
    
    return 0;
};
