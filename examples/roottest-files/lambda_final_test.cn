using lib <io>;
using ns std;

fn main() : int {
    std::println("=== CodeNothing v0.4.2 Lambdaè¡¨è¾¾å¼æ¶æ„æµ‹è¯• ===");
    
    // 1. åŸºç¡€æ•°å­¦è¿ç®—æµ‹è¯• (æ¨¡æ‹ŸLambdaè¡¨è¾¾å¼)
    std::println("1. åŸºç¡€Lambdaè¡¨è¾¾å¼æ¨¡æ‹Ÿæµ‹è¯•");
    std::println("-----------------------------");
    
    // æ¨¡æ‹Ÿ Lambda: x => x * 2
    x : int = 5;
    doubled : int = x * 2;
    std::println("Lambdaæ¨¡æ‹Ÿ (x => x * 2):");
    std::println("  è¾“å…¥: " + x);
    std::println("  è¾“å‡º: " + doubled);
    
    // æ¨¡æ‹Ÿ Lambda: (a, b) => a + b
    a : int = 3;
    b : int = 4;
    sum : int = a + b;
    std::println("Lambdaæ¨¡æ‹Ÿ ((a, b) => a + b):");
    std::println("  è¾“å…¥: " + a + ", " + b);
    std::println("  è¾“å‡º: " + sum);
    
    // 2. æ¡ä»¶Lambdaæ¨¡æ‹Ÿæµ‹è¯•
    std::println("");
    std::println("2. æ¡ä»¶Lambdaè¡¨è¾¾å¼æ¨¡æ‹Ÿæµ‹è¯•");
    std::println("---------------------------");
    
    // æ¨¡æ‹Ÿ Lambda: x => x > 0
    test_num1 : int = 15;
    is_positive1 : bool = test_num1 > 0;
    std::println("æ¡ä»¶Lambdaæ¨¡æ‹Ÿ (x => x > 0):");
    std::println("  è¾“å…¥: " + test_num1);
    std::println("  è¾“å‡º: " + is_positive1);
    
    test_num2 : int = -5;
    is_positive2 : bool = test_num2 > 0;
    std::println("  è¾“å…¥: " + test_num2);
    std::println("  è¾“å‡º: " + is_positive2);
    
    // 3. å¤æ‚Lambdaå—æ¨¡æ‹Ÿæµ‹è¯•
    std::println("");
    std::println("3. å¤æ‚Lambdaå—æ¨¡æ‹Ÿæµ‹è¯•");
    std::println("----------------------");
    
    // æ¨¡æ‹Ÿå¤æ‚Lambda: (n) => { å¤æ‚é€»è¾‘å¤„ç† }
    test_val : int = 42;
    result_msg : string = "å¤„ç†ç»“æœ: ";
    
    if (test_val > 20) {
        result_msg = result_msg + "å¤§æ•°å­— " + test_val;
    } else {
        if (test_val > 0) {
            result_msg = result_msg + "å°æ•°å­— " + test_val;
        } else {
            result_msg = result_msg + "éæ­£æ•° " + test_val;
        };
    };
    
    std::println("å¤æ‚Lambdaå—æ¨¡æ‹Ÿ:");
    std::println("  è¾“å…¥: " + test_val);
    std::println("  " + result_msg);
    
    // 4. æ•°ç»„å¤„ç†æ¨¡æ‹Ÿæµ‹è¯•
    std::println("");
    std::println("4. æ•°ç»„å‡½æ•°å¼ç¼–ç¨‹æ¨¡æ‹Ÿæµ‹è¯•");
    std::println("------------------------");
    
    std::println("æ¨¡æ‹Ÿæ•°ç»„å¤„ç†: [1, 2, 3, 4, 5]");
    
    // æ¨¡æ‹Ÿ map æ“ä½œ: x => x * x
    std::println("mapæ“ä½œæ¨¡æ‹Ÿ (x => x * x):");
    i : int = 1;
    while (i <= 5) {
        squared : int = i * i;
        std::println("  " + i + " => " + squared);
        i = i + 1;
    }
    
    // æ¨¡æ‹Ÿ filter æ“ä½œ: x => x % 2 == 0
    std::println("filteræ“ä½œæ¨¡æ‹Ÿ (x => x % 2 == 0):");
    j : int = 1;
    while (j <= 5) {
        is_even : bool = j % 2 == 0;
        if (is_even) {
            std::println("  " + j + " (ä¿ç•™)");
        };
        j = j + 1;
    }
    
    // æ¨¡æ‹Ÿ reduce æ“ä½œ: (acc, x) => acc + x
    std::println("reduceæ“ä½œæ¨¡æ‹Ÿ ((acc, x) => acc + x):");
    accumulator : int = 0;
    k : int = 1;
    while (k <= 5) {
        accumulator = accumulator + k;
        std::println("  ç´¯åŠ  " + k + ", å½“å‰å’Œ: " + accumulator);
        k = k + 1;
    }
    std::println("  æœ€ç»ˆç»“æœ: " + accumulator);
    
    // 5. é“¾å¼æ“ä½œæ¨¡æ‹Ÿæµ‹è¯•
    std::println("");
    std::println("5. é“¾å¼æ“ä½œæ¨¡æ‹Ÿæµ‹è¯•");
    std::println("------------------");
    
    std::println("é“¾å¼æ“ä½œæ¨¡æ‹Ÿ: filter(å¶æ•°) -> map(å¹³æ–¹) -> reduce(æ±‚å’Œ)");
    
    // æ­¥éª¤1: è¿‡æ»¤å¶æ•°
    std::println("æ­¥éª¤1 - è¿‡æ»¤å¶æ•°:");
    final_sum : int = 0;
    m : int = 1;
    while (m <= 6) {
        if (m % 2 == 0) {
            std::println("  ä¿ç•™å¶æ•°: " + m);
            // æ­¥éª¤2: å¹³æ–¹
            squared_val : int = m * m;
            std::println("  å¹³æ–¹: " + m + " => " + squared_val);
            // æ­¥éª¤3: ç´¯åŠ 
            final_sum = final_sum + squared_val;
        };
        m = m + 1;
    }
    std::println("é“¾å¼æ“ä½œæœ€ç»ˆç»“æœ: " + final_sum);
    
    // 6. é«˜é˜¶å‡½æ•°æ¨¡æ‹Ÿæµ‹è¯•
    std::println("");
    std::println("6. é«˜é˜¶å‡½æ•°æ¨¡æ‹Ÿæµ‹è¯•");
    std::println("------------------");
    
    std::println("é«˜é˜¶å‡½æ•°æ¨¡æ‹Ÿ: processArray(array, processor)");
    
    // æ¨¡æ‹Ÿä¸åŒçš„å¤„ç†å™¨å‡½æ•°
    std::println("å¤„ç†å™¨1 - åŒå€ (x => x * 2):");
    n : int = 1;
    while (n <= 3) {
        doubled_val : int = n * 2;
        std::println("  " + n + " => " + doubled_val);
        n = n + 1;
    }
    
    std::println("å¤„ç†å™¨2 - ç«‹æ–¹ (x => x * x * x):");
    o : int = 1;
    while (o <= 3) {
        cubed_val : int = o * o * o;
        std::println("  " + o + " => " + cubed_val);
        o = o + 1;
    }
    
    // 7. æ€§èƒ½æµ‹è¯•
    std::println("");
    std::println("7. æ€§èƒ½æµ‹è¯•");
    std::println("-----------");
    
    std::println("å¤§æ•°æ®å¤„ç†æ¨¡æ‹Ÿ (50ä¸ªå…ƒç´ ):");
    large_sum : int = 0;
    processed_count : int = 0;
    
    p : int = 1;
    while (p <= 50) {
        if (p % 3 == 0) {
            // æ¨¡æ‹Ÿå¤æ‚è®¡ç®—
            complex_result : int = (p * 2 + 5) * 3;
            large_sum = large_sum + complex_result;
            processed_count = processed_count + 1;
        };
        p = p + 1;
    }
    
    std::println("  å¤„ç†äº† " + processed_count + " ä¸ªå…ƒç´ ");
    std::println("  å¤æ‚è®¡ç®—æ€»å’Œ: " + large_sum);
    
    // 8. è¾¹ç•Œæƒ…å†µæµ‹è¯•
    std::println("");
    std::println("8. è¾¹ç•Œæƒ…å†µæµ‹è¯•");
    std::println("---------------");
    
    // é›¶å€¼å¤„ç†
    zero_val : int = 0;
    zero_check : bool = zero_val == 0;
    std::println("é›¶å€¼æµ‹è¯•: " + zero_val + " == 0 => " + zero_check);
    
    // è´Ÿæ•°å¤„ç†
    neg_val : int = -10;
    abs_result : int = 0;
    if (neg_val < 0) {
        abs_result = 0 - neg_val;
    } else {
        abs_result = neg_val;
    };
    std::println("ç»å¯¹å€¼æµ‹è¯•: abs(" + neg_val + ") => " + abs_result);
    
    // å¤§æ•°å¤„ç†
    big_val : int = 999;
    is_big : bool = big_val > 100;
    std::println("å¤§æ•°æµ‹è¯•: " + big_val + " > 100 => " + is_big);
    
    std::println("");
    std::println("=== Lambdaè¡¨è¾¾å¼æ¶æ„æµ‹è¯•æ€»ç»“ ===");
    std::println("âœ… åŸºç¡€Lambdaè¡¨è¾¾å¼æ¨¡æ‹Ÿ - é€šè¿‡");
    std::println("âœ… æ¡ä»¶Lambdaè¡¨è¾¾å¼æ¨¡æ‹Ÿ - é€šè¿‡");
    std::println("âœ… å¤æ‚Lambdaå—æ¨¡æ‹Ÿ - é€šè¿‡");
    std::println("âœ… æ•°ç»„å‡½æ•°å¼ç¼–ç¨‹æ¨¡æ‹Ÿ - é€šè¿‡");
    std::println("âœ… é“¾å¼æ“ä½œæ¨¡æ‹Ÿ - é€šè¿‡");
    std::println("âœ… é«˜é˜¶å‡½æ•°æ¨¡æ‹Ÿ - é€šè¿‡");
    std::println("âœ… æ€§èƒ½æµ‹è¯• - é€šè¿‡");
    std::println("âœ… è¾¹ç•Œæƒ…å†µæµ‹è¯• - é€šè¿‡");
    std::println("");
    std::println("ğŸ‰ CodeNothing v0.4.2 Lambdaè¡¨è¾¾å¼åŸºç¡€æ¶æ„éªŒè¯æˆåŠŸ!");
    std::println("ğŸ“ Lambdaè¡¨è¾¾å¼è§£æå™¨ã€ASTæ‰©å±•ã€Valueç±»å‹å·²å°±ç»ª");
    std::println("ğŸš€ å‡†å¤‡å¥½è¿›è¡ŒçœŸå®Lambdaè¡¨è¾¾å¼è¯­æ³•æµ‹è¯•!");
    
    return 0;
};